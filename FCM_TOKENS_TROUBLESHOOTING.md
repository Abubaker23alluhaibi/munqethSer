# ๐ ุงุณุชูุดุงู ูุดุงูู FCM Tokens

## ุงููุดููุฉ ุงูุญุงููุฉ
ุงูุฅุดุนุงุฑุงุช ูุง ุชุตู ูุฃู ุงูุณุงุฆููู ูุงูุนููุงุก ูุง ููุฌุฏ ูุฏููู FCM tokens ุตุงูุญุฉ.

## ุงูุฃุนุฑุงุถ ูู ุงูู Logs

### 1. ูุง ููุฌุฏ FCM tokens ููุณุงุฆููู
```
๐ Found 2 nearest drivers for delivery order
๐ฑ Drivers with FCM tokens: 0/2
โ๏ธ Found 2 drivers but none have FCM tokens - drivers need to login again to register FCM tokens
โ๏ธ No drivers found to notify for delivery order
```

### 2. ูุง ููุฌุฏ FCM token ููุนููู
```
โ๏ธ Customer found but no FCM token for phone: +9647654321000 - User needs to login again to register FCM token
```

---

## ุงูุญููู

### ุงูุญู ุงูููุฑู: ุญุฐู ุฌููุน FCM tokens ุงููุฏููุฉ

ูู MongoDB:
```javascript
// ุญุฐู ุฌููุน FCM tokens ูู ุงููุณุชุฎุฏููู
db.users.updateMany(
  { fcmToken: { $exists: true } },
  { $unset: { fcmToken: "" }, $set: { updatedAt: new Date() } }
);

// ุญุฐู ุฌููุน FCM tokens ูู ุงูุณุงุฆููู
db.drivers.updateMany(
  { fcmToken: { $exists: true } },
  { $unset: { fcmToken: "" }, $set: { updatedAt: new Date() } }
);
```

### ุงูุญู ุงูุฏุงุฆู: ุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู

#### ูููุณุชุฎุฏููู:
1. ุงุญุฐู ุงูุชุทุจูู ุงููุฏูู ูู ุงูุฌูุงุฒ
2. ุซุจุช APK ุฌุฏูุฏ (ุจุนุฏ ุฅุถุงูุฉ SHA fingerprints)
3. ุณุฌู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู
   - ุนูุฏ ุชุณุฌูู ุงูุฏุฎููุ ุณูุชู ุฅุฑุณุงู FCM token ุฌุฏูุฏ ุชููุงุฆูุงู

#### ููุณุงุฆููู:
1. ุงุญุฐู ุงูุชุทุจูู ุงููุฏูู ูู ุงูุฌูุงุฒ
2. ุซุจุช APK ุฌุฏูุฏ
3. ุณุฌู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู
   - ุนูุฏ ุชุณุฌูู ุงูุฏุฎููุ ุณูุชู ุฅุฑุณุงู FCM token ุฌุฏูุฏ ุชููุงุฆูุงู

---

## ุงูุชุญูู ูู FCM Tokens ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุนุฏุฏ ุงููุณุชุฎุฏููู ูุน tokens:
```javascript
db.users.countDocuments({ fcmToken: { $exists: true, $ne: null, $ne: "" } });
```

### ุนุฏุฏ ุงูุณุงุฆููู ูุน tokens:
```javascript
db.drivers.countDocuments({ fcmToken: { $exists: true, $ne: null, $ne: "" } });
```

### ุนุฑุถ ุจุนุถ tokens (ููุชุญูู):
```javascript
// ูููุณุชุฎุฏููู
db.users.find({ fcmToken: { $exists: true } }, { name: 1, phone: 1, fcmToken: 1 }).limit(5);

// ููุณุงุฆููู
db.drivers.find({ fcmToken: { $exists: true } }, { name: 1, driverId: 1, fcmToken: 1 }).limit(5);
```

---

## ููู ูุนูู ุงููุธุงู

### 1. ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู (ูู ุงูุชุทุจูู):
- ุงูุชุทุจูู ูุญุตู ุนูู FCM token ูู Firebase
- ุงูุชุทุจูู ูุฑุณู FCM token ุฅูู ุงูุณูุฑูุฑ ุชููุงุฆูุงู
- ุงูุณูุฑูุฑ ูุญูุธ FCM token ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. ุนูุฏ ุฅูุดุงุก ุทูุจ:
- ุงูุณูุฑูุฑ ูุจุญุซ ุนู ุงูุณุงุฆููู ุงูุฃูุฑุจ
- ุงูุณูุฑูุฑ ูุฌูุน FCM tokens ูู ุงูุณุงุฆููู
- ุงูุณูุฑูุฑ ูุฑุณู ุฅุดุนุงุฑุงุช FCM ููุณุงุฆููู
- ุงูุณูุฑูุฑ ูุฑุณู ุฅุดุนุงุฑ ููุนููู

### 3. ุนูุฏ ูุดู ุงูุฅุดุนุงุฑ:
- ุงูุณูุฑูุฑ ููุชุดู ุฃู FCM token ุบูุฑ ุตุงูุญ
- ุงูุณูุฑูุฑ ูุญุฐู FCM token ุชููุงุฆูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏ

### 1. SHA Fingerprints ูู Firebase Console:
- โ SHA-1: `fd:94:93:92:a4:3b:77:7a:66:cf:6b:2a:31:cd:1b:63:27:8a:82:cd`
- โ SHA-256: `da:79:d0:59:45:c0:2a:3c:dc:58:dd:42:49:4e:ef:ec:86:65:9e:cd:67:fa:1a:35:e6:23:82:d4:79:99:3a:80`

### 2. google-services.json:
- โ ููุฌูุฏ ูู `android/app/google-services.json`
- โ package name: `com.munqeth.app`

### 3. Firebase Admin SDK:
- โ `FIREBASE_PROJECT_ID` ููุฌูุฏ
- โ `FIREBASE_PRIVATE_KEY` ููุฌูุฏ
- โ `FIREBASE_CLIENT_EMAIL` ููุฌูุฏ

---

## Logs ุงููุญุณููุฉ

ุชู ุชุญุณูู logging ูู `orderController.js` ูุนุฑุถ:
- ุนุฏุฏ ุงูุณุงุฆููู ุงูุฐูู ูุฏููู FCM tokens
- Driver IDs ููุณุงุฆููู ุงูุฐูู ูุง ููุฌุฏ ูุฏููู tokens
- ุฑุณุงุฆู ุฃูุถุญ ุนูุฏ ุนุฏู ูุฌูุฏ tokens

---

## ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุงุญุฐู ุฌููุน FCM tokens** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงุณุชุฎุฏู MongoDB commands ุฃุนูุงู)
2. **ุชุฃูุฏ ูู SHA fingerprints** ูู Firebase Console
3. **ุงุจูู APK ุฌุฏูุฏ** ุจุนุฏ ุฅุถุงูุฉ SHA fingerprints
4. **ุซุจุช APK ุนูู ุฃุฌูุฒุฉ ุงููุณุชุฎุฏููู ูุงูุณุงุฆููู**
5. **ุงุทูุจ ูููู ุชุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู**
6. **ุงุฎุชุจุฑ ุงูุฅุดุนุงุฑุงุช** - ูุฌุจ ุฃู ุชุนูู ุงูุขู

---

## ููุงุญุธุงุช ูููุฉ

- FCM tokens ููุชููุฉ ุงูุตูุงุญูุฉ ูู ุชุนูู ุญุชู ุจุนุฏ ุฅุถุงูุฉ SHA fingerprints
- ูุฌุจ ุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู ููุญุตูู ุนูู tokens ุฌุฏูุฏุฉ
- ุงูููุฏ ุงูุขู ูุญุฐู tokens ุบูุฑ ุงูุตุงูุญุฉ ุชููุงุฆูุงู ุนูุฏ ุงููุดู

